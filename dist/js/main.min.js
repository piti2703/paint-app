"use strict";var recentColor,aLine,bLine,cLine,dLine,aRectangle,bRectangle,cRectangle,dRectangle,colors=document.querySelectorAll(".tools-area__box i"),rangeInput=document.querySelector(".tools-area__box-range"),colorInput=document.querySelector(".tools-area__box-color"),clearBtn=document.querySelector(".fa-xmark"),undoBtn=document.querySelector(".fa-rotate-left"),eraserBtn=document.querySelector(".eraser"),brush=document.querySelector(".fa-paintbrush"),line=document.querySelector(".tools-area__box-line"),square=document.querySelector(".fa-square-full"),allTools=document.querySelectorAll(".tool"),canvas=document.querySelector(".drawing-area"),ctx=canvas.getContext("2d"),canvas2=(canvas.width=canvas.offsetWidth,canvas.height=canvas.offsetHeight,ctx.strokeStyle="#000",ctx.lineJoin="round",ctx.lineCap="round",ctx.lineWidth=10,ctx.fillStyle="#fff",document.querySelector(".drawing-area2")),ctx2=canvas2.getContext("2d"),isDrawing=(canvas2.width=canvas2.offsetWidth,canvas2.height=canvas2.offsetHeight,ctx2.strokeStyle="#000",ctx2.lineJoin="round",ctx2.lineCap="round",!(ctx2.lineWidth=10)),lastX=0,lastY=0,restoreArray=[],index=-1;function draw(e){isDrawing&&(brush.classList.contains("active")?(ctx.beginPath(),ctx.moveTo(lastX,lastY),ctx.lineTo(e.offsetX,e.offsetY),ctx.stroke(),lastX=e.offsetX,lastY=e.offsetY):line.classList.contains("active")?(canvas.style.opacity=.8,ctx2.beginPath(),ctx2.moveTo(lastX,lastY),ctx2.lineTo(e.offsetX,e.offsetY),ctx2.fillStyle="#fff",ctx2.clearRect(0,0,canvas2.width,canvas2.height),ctx2.fillRect(0,0,canvas2.width,canvas2.height),ctx2.stroke(),aLine=lastX,bLine=lastY,cLine=e.offsetX,dLine=e.offsetY):square.classList.contains("active")&&(canvas.style.opacity=.8,ctx2.beginPath(),ctx2.rect(lastX,lastY,e.offsetX,e.offsetY),ctx2.fillStyle="#fff",ctx2.clearRect(0,0,canvas2.width,canvas2.height),ctx2.fillRect(0,0,canvas2.width,canvas2.height),ctx2.stroke(),aRectangle=lastX,bRectangle=lastY,cRectangle=e.offsetX,dRectangle=e.offsetY))}function changeColor(){this.classList.contains("red")?ctx.strokeStyle="#ec0707":this.classList.contains("green")?ctx.strokeStyle="#008000":this.classList.contains("blue")?ctx.strokeStyle="#0707e0":this.classList.contains("yellow")?ctx.strokeStyle="#fdcb58":this.classList.contains("tools-area__box-color")&&(ctx.strokeStyle=this.value)}function changeWidth(){ctx.lineWidth=this.value,ctx2.lineWidth=this.value}function eraser(){recentColor=ctx.strokeStyle,brush.classList.add("active"),line.classList.remove("active"),square.classList.remove("active"),ctx.strokeStyle="#fff"}function clearCanvas(){ctx.fillStyle="#fff",ctx.clearRect(0,0,canvas.width,canvas.height),ctx.fillRect(0,0,canvas.width,canvas.height),ctx2.fillStyle="#fff",ctx2.clearRect(0,0,canvas2.width,canvas2.height),ctx2.fillRect(0,0,canvas2.width,canvas2.height),restoreArray=[],index=-1}function undo(){index<=0?clearCanvas():(--index,restoreArray.pop(),ctx.putImageData(restoreArray[index],0,0),ctx2.putImageData(restoreArray[index],0,0))}function changeActive(){var e=this.parentNode.children;Array.from(e).forEach(function(e){return e.classList.remove("active")}),this.classList.add("active")}function creteLine(e,t,a,c){ctx.beginPath(),ctx.moveTo(e,t),ctx.lineTo(a,c),ctx.stroke()}function createRectangle(e,t,a,c){ctx.beginPath(),ctx.rect(e,t,a,c),ctx.stroke(),console.log("test")}canvas.addEventListener("mousedown",function(e){isDrawing=!0,lastX=e.offsetX,lastY=e.offsetY}),canvas2.addEventListener("mousedown",function(e){isDrawing=!0,lastX=e.offsetX,lastY=e.offsetY,dLine=cLine=bLine=aLine=0}),canvas.addEventListener("mousemove",draw),canvas2.addEventListener("mousemove",draw),canvas.addEventListener("mouseup",function(){isDrawing=!1,line.classList.contains("active")?creteLine(aLine,bLine,cLine,dLine):square.classList.contains("active")&&createRectangle(aRectangle,bRectangle,cRectangle,dRectangle),canvas.style.opacity=1,restoreArray.push(ctx.getImageData(0,0,canvas.width,canvas.height)),index+=1,console.log(restoreArray)}),canvas.addEventListener("mouseout",function(){brush.classList.contains("active")&&(isDrawing=!1)}),colors.forEach(function(e){return e.addEventListener("click",changeColor)}),colorInput.addEventListener("change",changeColor),rangeInput.addEventListener("change",changeWidth),clearBtn.addEventListener("click",clearCanvas),undoBtn.addEventListener("click",undo),allTools.forEach(function(e){e.addEventListener("click",changeActive),e.addEventListener("click",function(){ctx.strokeStyle=recentColor})}),eraserBtn.addEventListener("click",eraser);var download_img=function(e){var t=canvas.toDataURL("image/png");e.href=t};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsicmVjZW50Q29sb3IiLCJiTGluZSIsImNMaW5lIiwiZExpbmUiLCJhUmVjdGFuZ2xlIiwiYlJlY3RhbmdsZSIsImNSZWN0YW5nbGUiLCJkUmVjdGFuZ2xlIiwiY29sb3JzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwicmFuZ2VJbnB1dCIsInF1ZXJ5U2VsZWN0b3IiLCJjb2xvcklucHV0IiwiY2xlYXJCdG4iLCJlcmFzZXJCdG4iLCJicnVzaCIsImxpbmUiLCJhbGxUb29scyIsImNhbnZhcyIsIm9mZnNldFdpZHRoIiwiY3R4IiwiaGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0IiwibGluZUNhcCIsImxpbmVKb2luIiwiZmlsbFN0eWxlIiwiY2FudmFzMiIsImN0eDIiLCJsaW5lV2lkdGgiLCJnZXRDb250ZXh0IiwiaXNEcmF3aW5nIiwibGFzdFgiLCJsYXN0WSIsImluZGV4IiwiYmVnaW5QYXRoIiwibW92ZVRvIiwiZHJhdyIsImNvbnRhaW5zIiwiY2xlYXJSZWN0IiwiZSIsInN0cm9rZSIsImNsYXNzTGlzdCIsInN0eWxlIiwib2Zmc2V0WCIsIm9wYWNpdHkiLCJvZmZzZXRZIiwiZmlsbFJlY3QiLCJhTGluZSIsInNxdWFyZSIsImNoYW5nZUNvbG9yIiwicmVjdCIsInN0cm9rZVN0eWxlIiwid2lkdGgiLCJjaGFuZ2VXaWR0aCIsInRoaXMiLCJlcmFzZXIiLCJyZW1vdmUiLCJjbGVhckNhbnZhcyIsInZhbHVlIiwicmVzdG9yZUFycmF5IiwiYWRkIiwicHV0SW1hZ2VEYXRhIiwicGFyZW50IiwiYWxsU2libGluZ3MiLCJjaGlsZHJlbiIsImFyciIsIkFycmF5IiwiZnJvbSIsInVuZG8iLCJwb3AiLCJjb25zb2xlIiwicGFyZW50Tm9kZSIsImZvckVhY2giLCJlbCIsImNyZXRlTGluZSIsImEiLCJiIiwiYyIsImQiLCJjcmVhdGVSZWN0YW5nbGUiLCJhZGRFdmVudExpc3RlbmVyIiwidW5kb0J0biIsImNoYW5nZUFjdGl2ZSIsInRvb2wiLCJwdXNoIiwiZ2V0SW1hZ2VEYXRhIiwiZG93bmxvYWRfaW1nIiwibG9nIiwiaW1hZ2VVUkkiLCJjb2xvciIsInRvRGF0YVVSTCIsImhyZWYiXSwibWFwcGluZ3MiOiJhQUFBLElBWUlBLFlBR0FDLE1BQ0FDLE1BQ0FDLE1BQ0FDLE1BQ0FDLFdBQ0FDLFdBQ0FDLFdBQUFBLFdBckJFQyxPQUFTQyxTQUFTQyxpQkFBaUIsc0JBQ25DQyxXQUFhRixTQUFTRyxjQUFjLDBCQURwQ0osV0FBU0MsU0FBU0MsY0FBaUIsMEJBQ25DQyxTQUFhRixTQUFTRyxjQUFjLGFBQ3BDQyxRQUFVSixTQUFXRyxjQUFSLG1CQUNiRSxVQUFXTCxTQUFTRyxjQUFjLFdBRWxDRyxNQUFTTixTQUFHQSxjQUFTRyxrQkFFckJJLEtBQVFQLFNBQVNHLGNBQWMseUJBQy9CSyxPQUFPUixTQUFTRyxjQUFjLG1CQUc5Qk0sU0FBV1QsU0FBU0MsaUJBQWlCLFNBZ0JyQ1MsT0FBU0EsU0FBT0MsY0FBdEIsaUJBQ01DLElBQUNDLE9BQVNILFdBQU9JLE1Ba0JsQkMsU0FmTEgsT0FBSUksTUFBV04sT0FBZkMsWUFDQUMsT0FBSUcsT0FBVUwsT0FBZEksYUFFQUYsSUFBSUssWUFBWSxPQUhoQkwsSUFBSUksU0FBVyxRQU9mSixJQUFNTSxRQUFVbEIsUUFDaEJZLElBQU1PLFVBQU9ELEdBRWJBLElBQUFBLFVBQWdCQSxPQUtEbEIsU0FBZkcsY0FBQSxtQkFDS2lCLEtBQUFBLFFBQUxDLFdBQUEsTUFZQ0MsV0FUREosUUFBSUssTUFBSkwsUUFBQVAsWUFDQU8sUUFBSU0sT0FBSk4sUUFBQUosYUFHQUssS0FBSU0sWUFBSixPQVRBTixLQUFLSCxTQUFXLFFBV2hCRyxLQUFBSixRQUFBLFVBVEFJLEtBVUNDLFVBQUEsS0FHQ1IsTUFBSWMsRUFDSmQsTUFBSWUsRUFFSmYsYUFBQSxHQUNBVyxPQUFTLEVBUlgsU0FVUUssS0FBSXBCLEdBQ1ZFLFlBR0FTLE1BQUtRLFVBQUxFLFNBQUEsV0FWQWpCLElBV0FPLFlBVkFQLElBWUFP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RHJDLFdBQVdvRSxpQkFBaUIsU0FBVS9CLGFBQ3RDdkMsV0FBV3NFLGlCQUFpQixTQUFVM0IsYUFFdEN4QyxTQUFTbUUsaUJBQWlCLFFBQVN2QixhQUNuQ3dCLFFBQVFELGlCQUFpQixRQUFTWixNQUVsQ25ELFNBQVN1RCxRQUFRLFNBQUFXLEdBQ2hCQSxFQUFLSCxpQkFBaUIsUUFBU0UsY0FDL0JDLEVBQUtILGlCQUFpQixRQUFTLFdBQzlCNUQsSUFBSStCLFlBQWNwRCxnQkFJcEJlLFVBQVVrRSxpQkFBaUIsUUFBU3pCLFFBRXBDLElBQU0rQixhQUFlLFNBQVViLEdBQzlCLElBQUllLEVBQVd0RSxPQUFPd0UsVUFBVSxhQUNoQ2pCLEVBQUdrQixLQUFPSCIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGNvbG9ycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudG9vbHMtYXJlYV9fYm94IGlcIilcclxuY29uc3QgcmFuZ2VJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9vbHMtYXJlYV9fYm94LXJhbmdlXCIpXHJcbmNvbnN0IGNvbG9ySW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvb2xzLWFyZWFfX2JveC1jb2xvclwiKVxyXG5jb25zdCBjbGVhckJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZmEteG1hcmtcIilcclxuY29uc3QgdW5kb0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZmEtcm90YXRlLWxlZnRcIilcclxuY29uc3QgZXJhc2VyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lcmFzZXJcIilcclxuXHJcbmNvbnN0IGJydXNoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mYS1wYWludGJydXNoXCIpXHJcbmNvbnN0IGxpbmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvb2xzLWFyZWFfX2JveC1saW5lXCIpXHJcbmNvbnN0IHNxdWFyZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZmEtc3F1YXJlLWZ1bGxcIilcclxuXHJcbmNvbnN0IGFsbFRvb2xzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50b29sXCIpXHJcbmxldCByZWNlbnRDb2xvclxyXG5cclxubGV0IGFMaW5lXHJcbmxldCBiTGluZVxyXG5sZXQgY0xpbmVcclxubGV0IGRMaW5lXHJcbmxldCBhUmVjdGFuZ2xlXHJcbmxldCBiUmVjdGFuZ2xlXHJcbmxldCBjUmVjdGFuZ2xlXHJcbmxldCBkUmVjdGFuZ2xlXHJcblxyXG4vLyBDQU5WQVMgMVxyXG5jb25zdCBjYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRyYXdpbmctYXJlYVwiKVxyXG5jb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpXHJcblxyXG5jYW52YXMud2lkdGggPSBjYW52YXMub2Zmc2V0V2lkdGhcclxuY2FudmFzLmhlaWdodCA9IGNhbnZhcy5vZmZzZXRIZWlnaHRcclxuXHJcbmN0eC5zdHJva2VTdHlsZSA9IFwiIzAwMFwiXHJcbmN0eC5saW5lSm9pbiA9IFwicm91bmRcIlxyXG5jdHgubGluZUNhcCA9IFwicm91bmRcIlxyXG5jdHgubGluZVdpZHRoID0gMTBcclxuY3R4LmZpbGxTdHlsZSA9IFwiI2ZmZlwiXHJcblxyXG4vLyBDQU5WQVMgMlxyXG5cclxuY29uc3QgY2FudmFzMiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZHJhd2luZy1hcmVhMlwiKVxyXG5jb25zdCBjdHgyID0gY2FudmFzMi5nZXRDb250ZXh0KFwiMmRcIilcclxuXHJcbmNhbnZhczIud2lkdGggPSBjYW52YXMyLm9mZnNldFdpZHRoXHJcbmNhbnZhczIuaGVpZ2h0ID0gY2FudmFzMi5vZmZzZXRIZWlnaHRcclxuXHJcbmN0eDIuc3Ryb2tlU3R5bGUgPSBcIiMwMDBcIlxyXG5jdHgyLmxpbmVKb2luID0gXCJyb3VuZFwiXHJcbmN0eDIubGluZUNhcCA9IFwicm91bmRcIlxyXG5jdHgyLmxpbmVXaWR0aCA9IDEwXHJcblxyXG5sZXQgaXNEcmF3aW5nID0gZmFsc2VcclxubGV0IGxhc3RYID0gMFxyXG5sZXQgbGFzdFkgPSAwXHJcblxyXG5sZXQgcmVzdG9yZUFycmF5ID0gW11cclxubGV0IGluZGV4ID0gLTFcclxuXHJcbmZ1bmN0aW9uIGRyYXcoZSkge1xyXG5cdGlmICghaXNEcmF3aW5nKSByZXR1cm5cclxuXHJcblx0aWYgKGJydXNoLmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZVwiKSkge1xyXG5cdFx0Y3R4LmJlZ2luUGF0aCgpXHJcblx0XHRjdHgubW92ZVRvKGxhc3RYLCBsYXN0WSlcclxuXHRcdGN0eC5saW5lVG8oZS5vZmZzZXRYLCBlLm9mZnNldFkpXHJcblx0XHRjdHguc3Ryb2tlKClcclxuXHRcdGxhc3RYID0gZS5vZmZzZXRYXHJcblx0XHRsYXN0WSA9IGUub2Zmc2V0WVxyXG5cdH0gZWxzZSBpZiAobGluZS5jbGFzc0xpc3QuY29udGFpbnMoXCJhY3RpdmVcIikpIHtcclxuXHRcdGNhbnZhcy5zdHlsZS5vcGFjaXR5ID0gMC44XHJcblxyXG5cdFx0Y3R4Mi5iZWdpblBhdGgoKVxyXG5cdFx0Y3R4Mi5tb3ZlVG8obGFzdFgsIGxhc3RZKVxyXG5cdFx0Y3R4Mi5saW5lVG8oZS5vZmZzZXRYLCBlLm9mZnNldFkpXHJcblxyXG5cdFx0Y3R4Mi5maWxsU3R5bGUgPSBcIiNmZmZcIlxyXG5cdFx0Y3R4Mi5jbGVhclJlY3QoMCwgMCwgY2FudmFzMi53aWR0aCwgY2FudmFzMi5oZWlnaHQpXHJcblx0XHRjdHgyLmZpbGxSZWN0KDAsIDAsIGNhbnZhczIud2lkdGgsIGNhbnZhczIuaGVpZ2h0KVxyXG5cclxuXHRcdGN0eDIuc3Ryb2tlKClcclxuXHJcblx0XHRhTGluZSA9IGxhc3RYXHJcblx0XHRiTGluZSA9IGxhc3RZXHJcblx0XHRjTGluZSA9IGUub2Zmc2V0WFxyXG5cdFx0ZExpbmUgPSBlLm9mZnNldFlcclxuXHR9IGVsc2UgaWYgKHNxdWFyZS5jbGFzc0xpc3QuY29udGFpbnMoXCJhY3RpdmVcIikpIHtcclxuXHRcdGNhbnZhcy5zdHlsZS5vcGFjaXR5ID0gMC44XHJcblxyXG5cdFx0Y3R4Mi5iZWdpblBhdGgoKVxyXG5cdFx0Y3R4Mi5yZWN0KGxhc3RYLCBsYXN0WSwgZS5vZmZzZXRYLCBlLm9mZnNldFkpXHJcblxyXG5cdFx0Y3R4Mi5maWxsU3R5bGUgPSBcIiNmZmZcIlxyXG5cdFx0Y3R4Mi5jbGVhclJlY3QoMCwgMCwgY2FudmFzMi53aWR0aCwgY2FudmFzMi5oZWlnaHQpXHJcblx0XHRjdHgyLmZpbGxSZWN0KDAsIDAsIGNhbnZhczIud2lkdGgsIGNhbnZhczIuaGVpZ2h0KVxyXG5cclxuXHRcdGN0eDIuc3Ryb2tlKClcclxuXHJcblx0XHRhUmVjdGFuZ2xlID0gbGFzdFhcclxuXHRcdGJSZWN0YW5nbGUgPSBsYXN0WVxyXG5cdFx0Y1JlY3RhbmdsZSA9IGUub2Zmc2V0WFxyXG5cdFx0ZFJlY3RhbmdsZSA9IGUub2Zmc2V0WVxyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gY2hhbmdlQ29sb3IoKSB7XHJcblx0aWYgKHRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKFwicmVkXCIpKSB7XHJcblx0XHRjdHguc3Ryb2tlU3R5bGUgPSBcIiNlYzA3MDdcIlxyXG5cdH0gZWxzZSBpZiAodGhpcy5jbGFzc0xpc3QuY29udGFpbnMoXCJncmVlblwiKSkge1xyXG5cdFx0Y3R4LnN0cm9rZVN0eWxlID0gXCIjMDA4MDAwXCJcclxuXHR9IGVsc2UgaWYgKHRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYmx1ZVwiKSkge1xyXG5cdFx0Y3R4LnN0cm9rZVN0eWxlID0gXCIjMDcwN2UwXCJcclxuXHR9IGVsc2UgaWYgKHRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKFwieWVsbG93XCIpKSB7XHJcblx0XHRjdHguc3Ryb2tlU3R5bGUgPSBcIiNmZGNiNThcIlxyXG5cdH0gZWxzZSBpZiAodGhpcy5jbGFzc0xpc3QuY29udGFpbnMoXCJ0b29scy1hcmVhX19ib3gtY29sb3JcIikpIHtcclxuXHRcdGN0eC5zdHJva2VTdHlsZSA9IHRoaXMudmFsdWVcclxuXHR9IGVsc2UgcmV0dXJuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoYW5nZVdpZHRoKCkge1xyXG5cdGN0eC5saW5lV2lkdGggPSB0aGlzLnZhbHVlXHJcblx0Y3R4Mi5saW5lV2lkdGggPSB0aGlzLnZhbHVlXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVyYXNlcigpIHtcclxuXHRyZWNlbnRDb2xvciA9IGN0eC5zdHJva2VTdHlsZVxyXG5cdGJydXNoLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIilcclxuXHRsaW5lLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIilcclxuXHRzcXVhcmUuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKVxyXG5cdGN0eC5zdHJva2VTdHlsZSA9IFwiI2ZmZlwiXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsZWFyQ2FudmFzKCkge1xyXG5cdGN0eC5maWxsU3R5bGUgPSBcIiNmZmZcIlxyXG5cdGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KVxyXG5cdGN0eC5maWxsUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpXHJcblxyXG5cdGN0eDIuZmlsbFN0eWxlID0gXCIjZmZmXCJcclxuXHRjdHgyLmNsZWFyUmVjdCgwLCAwLCBjYW52YXMyLndpZHRoLCBjYW52YXMyLmhlaWdodClcclxuXHRjdHgyLmZpbGxSZWN0KDAsIDAsIGNhbnZhczIud2lkdGgsIGNhbnZhczIuaGVpZ2h0KVxyXG5cdHJlc3RvcmVBcnJheSA9IFtdXHJcblx0aW5kZXggPSAtMVxyXG59XHJcblxyXG5mdW5jdGlvbiB1bmRvKCkge1xyXG5cdGlmIChpbmRleCA8PSAwKSB7XHJcblx0XHRjbGVhckNhbnZhcygpXHJcblx0fSBlbHNlIHtcclxuXHRcdGluZGV4IC09IDFcclxuXHRcdHJlc3RvcmVBcnJheS5wb3AoKVxyXG5cdFx0Y3R4LnB1dEltYWdlRGF0YShyZXN0b3JlQXJyYXlbaW5kZXhdLCAwLCAwKVxyXG5cdFx0Y3R4Mi5wdXRJbWFnZURhdGEocmVzdG9yZUFycmF5W2luZGV4XSwgMCwgMClcclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoYW5nZUFjdGl2ZSgpIHtcclxuXHRjb25zdCBwYXJlbnQgPSB0aGlzLnBhcmVudE5vZGVcclxuXHRjb25zdCBhbGxTaWJsaW5ncyA9IHBhcmVudC5jaGlsZHJlblxyXG5cdGNvbnN0IGFyciA9IEFycmF5LmZyb20oYWxsU2libGluZ3MpXHJcblx0YXJyLmZvckVhY2goZWwgPT4gZWwuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKSlcclxuXHJcblx0dGhpcy5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZXRlTGluZShhLCBiLCBjLCBkKSB7XHJcblx0Y3R4LmJlZ2luUGF0aCgpXHJcblx0Y3R4Lm1vdmVUbyhhLCBiKVxyXG5cdGN0eC5saW5lVG8oYywgZClcclxuXHRjdHguc3Ryb2tlKClcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlUmVjdGFuZ2xlKGEsIGIsIGMsIGQpIHtcclxuXHRjdHguYmVnaW5QYXRoKClcclxuXHRjdHgucmVjdChhLCBiLCBjLCBkKVxyXG5cdGN0eC5zdHJva2UoKVxyXG5cdGNvbnNvbGUubG9nKFwidGVzdFwiKVxyXG59XHJcblxyXG5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBlID0+IHtcclxuXHRpc0RyYXdpbmcgPSB0cnVlXHJcblx0bGFzdFggPSBlLm9mZnNldFhcclxuXHRsYXN0WSA9IGUub2Zmc2V0WVxyXG59KVxyXG5cclxuY2FudmFzMi5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGUgPT4ge1xyXG5cdGlzRHJhd2luZyA9IHRydWVcclxuXHRsYXN0WCA9IGUub2Zmc2V0WFxyXG5cdGxhc3RZID0gZS5vZmZzZXRZXHJcblxyXG5cdGFMaW5lID0gMFxyXG5cdGJMaW5lID0gMFxyXG5cdGNMaW5lID0gMFxyXG5cdGRMaW5lID0gMFxyXG59KVxyXG5cclxuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgZHJhdylcclxuY2FudmFzMi5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIGRyYXcpXHJcblxyXG5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgKCkgPT4ge1xyXG5cdGlzRHJhd2luZyA9IGZhbHNlXHJcblxyXG5cdGlmIChsaW5lLmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZVwiKSkge1xyXG5cdFx0Y3JldGVMaW5lKGFMaW5lLCBiTGluZSwgY0xpbmUsIGRMaW5lKVxyXG5cdH0gZWxzZSBpZiAoc3F1YXJlLmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZVwiKSkge1xyXG5cdFx0Y3JlYXRlUmVjdGFuZ2xlKGFSZWN0YW5nbGUsIGJSZWN0YW5nbGUsIGNSZWN0YW5nbGUsIGRSZWN0YW5nbGUpXHJcblx0fVxyXG5cclxuXHRjYW52YXMuc3R5bGUub3BhY2l0eSA9IDFcclxuXHJcblx0cmVzdG9yZUFycmF5LnB1c2goY3R4LmdldEltYWdlRGF0YSgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpKVxyXG5cdGluZGV4ICs9IDFcclxuXHJcblx0Y29uc29sZS5sb2cocmVzdG9yZUFycmF5KVxyXG59KVxyXG5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3V0XCIsICgpID0+IHtcclxuXHRpZiAoYnJ1c2guY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlXCIpKSB7XHJcblx0XHRpc0RyYXdpbmcgPSBmYWxzZVxyXG5cdH0gZWxzZSByZXR1cm5cclxufSlcclxuXHJcbmNvbG9ycy5mb3JFYWNoKGNvbG9yID0+IGNvbG9yLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjaGFuZ2VDb2xvcikpXHJcbmNvbG9ySW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBjaGFuZ2VDb2xvcilcclxucmFuZ2VJbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGNoYW5nZVdpZHRoKVxyXG5cclxuY2xlYXJCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsZWFyQ2FudmFzKVxyXG51bmRvQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB1bmRvKVxyXG5cclxuYWxsVG9vbHMuZm9yRWFjaCh0b29sID0+IHtcclxuXHR0b29sLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjaGFuZ2VBY3RpdmUpXHJcblx0dG9vbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cdFx0Y3R4LnN0cm9rZVN0eWxlID0gcmVjZW50Q29sb3JcclxuXHR9KVxyXG59KVxyXG5cclxuZXJhc2VyQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlcmFzZXIpXHJcblxyXG5jb25zdCBkb3dubG9hZF9pbWcgPSBmdW5jdGlvbiAoZWwpIHtcclxuXHR2YXIgaW1hZ2VVUkkgPSBjYW52YXMudG9EYXRhVVJMKFwiaW1hZ2UvcG5nXCIpXHJcblx0ZWwuaHJlZiA9IGltYWdlVVJJXHJcbn1cclxuIl19
